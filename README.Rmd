---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# jtracer

<!-- badges: start -->
<!-- badges: end -->

jtracer provides an R interface to jTRACE, a re-implementation of the **TRACE** model of spoken word recognition (McClelland & Elman, [1986](https://www.sciencedirect.com/science/article/pii/0010028586900150)) created by Strauss, Harris & Magnusson ([2007](https://magnuson.psy.uconn.edu/jtrace/)). Using the functions in this package you can generate the files you need to perform simulations in jTRACE.

## Installation

You can install it from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("bilingual-project/jtracer")
```

## Installing and launching jTRACE

First, you need to download jTRACE. You do it from R with:

```r
jtracer::jtrace_install()
```
This will download the jTRACE folder from [https://magnuson.psy.uconn.edu/jtrace/](https://magnuson.psy.uconn.edu/jtrace/) into your home directory (normally Documents) as `.jtrace`. You won't have to open this folder to use jtracer. This function will also check if a sufficiently recent version of Java is up and running (>1.4). If not, it will prompt you to do it. 

Once an appropriate version of Java is up and running, and jTRACE has been installed, you will be able to launch jTRACE with:

```r
jtracer::jtrace_launch()
```

## Extracting a lexicon from jTRACE

jTRACE has multiple lexica available to perform simulations. By default, it offers:

* biglex_lr
* biglex_lr_^a
* biglex901
* context_lex
* empty
* initial_lexicon
* sevenlex
* slex
* slex_pairs

You can import a lexicon from jTRACE as a data frame with `jtrace_get_lexicon`. For example:

```{r lexicon, echo=TRUE}
library(jtracer)
lex <- jtrace_get_lexicon(lexicon = "slex")
head(lex)
```


## Creating a lexicon for jTRACE

The `jtrace_create_lexicon` generates a new lexicon ready to be loaded to jTRACE and used in simulations. You will only need to provide phonological forms of the words you wish to include in the lexicon (in jTRACE notation) and their lexical frequency in the language of interest (English, Spanish, or Catalan).

### Extracting lexical frequencies

Since lexical frequencies are required to run a simulation, you must do so before creating your custom lexicon. You can extract the absolute, relative, or Zipf-transformed lexical frequencies of the words using the `jtrace_get_frequency` (see example below). You can consult the built-in dataset `frequencies` to see the complete list of frequencies available (extracted from the SUBTLEX-UK, SUBTLEX-ESP, and SUBTLEX-CAT databases). The `language` argument controls that language lexical frequencies should be looked up into, and the `scale` argument indicates the scale of the lexical frequencies that should be returned: "frequency_abs" (raw counts), "frequency_rel" (counts per million words), or "frequency_zipf" (Zipf-transformed frequencies). Following jTRACE's standards, frequencies are computed as counts per million by default.


```{r frequencies, echo=TRUE}
my_words <- c("plane", "cake", "tiger", "ham", "seat")
my_freqs <- jtrace_get_frequency(
  word = my_words,
  language = "English",
  scale = c("frequency_rel", "frequency_zipf")
)
head(my_freqs)
```

### Generate jTRACE lexicon

Now we can create a new lexicon, which we will call "custom":

```{r lexicon_new, echo = TRUE}
my_phons <- c("plEIn", "kEIk", "taIÉ¡@", "ham", "sit")
jtrace_create_lexicon(
  phonology = my_phons,
  frequency = my_freqs,
  lexicon_name = "answers"
)
```






